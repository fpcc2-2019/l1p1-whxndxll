---
title: "Temperatura JP x CG"
output:
    html_document:
        code_folding: hide
    df_print: paged
theme: sandstone
---

```{r label= Imports, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(here)
library(lubridate)
library(ggbeeswarm)
library(scales)
theme_set(theme_gray())
```

#### Antes de realizar qualquer análise preprocessei os dados com a finalidade selecionar do conjunto de dados somente as tuplas cujas semanas onde haviam leitura de temperatura nas duas cidades, entre os anos de 2010 a 2018.

```{r Preprocessing}
climas = read_csv(here::here("data/clima_cg_jp-semanal.csv"), 
                  col_types = "cTdddddd")
semanas_ambas_ocorrencias = climas %>% count(semana) %>% filter(n == 2) %>% pull(semana)

# Selecionando somente as semanas onde há leitura nas duas cidades
preprocessed_climas = climas %>% filter(semana %in% semanas_ambas_ocorrencias) %>% filter(ano >= 2010, ano < 2019)

# preprocessed_climas %>%  group_by(cidade) %>% count(ano,mes) %>% summary()
```

### Onde é mais quente?

```{r Campina Grande}
medias_anuais_cg = preprocessed_climas %>% filter(cidade == 'Campina Grande') %>% group_by(ano) %>% summarise(media = mean(tmedia), min = mean(tmin), max = mean(tmax))

medias_anuais_cg %>% gather("Type", "Value",-ano) %>% ggplot(mapping = aes(ano, Value, fill = Type)) + scale_y_continuous(limits =c(15, 31), oob = rescale_none) + geom_col(position = "dodge") + scale_x_discrete(limits = c(2010:2018)) + labs(x = "Anos", y="Temperatura em C", fill = "Métricas") + ggtitle("          Média das temperaturas mínimas, médias e máximas de \n                         2010 a 2018 em Campina Grande")
```

```{r João Pessoa}
medias_anuais_jp = preprocessed_climas %>% filter(cidade == 'João Pessoa') %>% group_by(ano) %>% summarise(media = mean(tmedia), min = mean(tmin), max = mean(tmax))

medias_anuais_jp %>% gather("Métrica", "Value",-ano) %>% ggplot(mapping = aes(ano, Value, fill = Métrica)) + scale_y_continuous(limits =c(15, 33), oob = rescale_none) + geom_col(position = "dodge") + scale_x_discrete(limits = c(2010:2018)) + labs(x = "Anos", y="Temperatura em C") + ggtitle("          Média das temperaturas mínimas, médias e máximas de \n                           2010 a 2018 em João Pessoa")
```

## Temperatura

### Onde é mais quente?


### As temperaturas máximas semanais (o pico do calor) são tão diferentes quanto as médias? Mais?  


### Quais os meses mais quentes e mais frios? 


### Qual foi o São João  mais frio de CG que está nos nossos dados?



## Chuva

### Quanto chove por semana em JP e CG?

Como é a distribuição do volume de chuvas por semana em JP e CG? A chuva varia mais ou menos que a temperatura? O formato da distribuição é igual? 

### No geral, onde chove mais?

### A distribuição é diferente em meses específicos? 

